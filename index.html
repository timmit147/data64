<img crossorigin="anonymous"  id=imageid src='https://cors-anywhere.herokuapp.com/https://v112.nbc.bibliotheek.nl/thumbnail?uri=http://data.bibliotheek.nl/ggc/ppn/241964822&token=c1322402'>

<script>
function getBase64FromImageUrl(img) {

  var canvas = document.createElement("canvas");
  canvas.width = img.width;
  canvas.height = img.height;
  var ctx = canvas.getContext("2d");
  ctx.drawImage(img, 0, 0);
  var dataURL = canvas.toDataURL("image/png");
  // console.log(dataURL);
  return dataURL;
}
  
  const image = document.getElementById("imageid")
  let loaded= false
  //test
  image.addEventListener("load", function(){
    if(loaded) return;
    loaded = true
    this.src = getBase64FromImageUrl(this)
    console.log('src', this.src)
  })


// var base64 = getBase64FromImageUrl(document.getElementById("imageid"));
</script> 
